"use strict";var MAX_SUGGESTIONS=10,TOTAL_RESULTS=0,SEARCH_QUERY="",convertObjToUrlParams=function(r){return Object.keys(r).map(function(e){return e+"="+r[e]}).join("&")},createDomNode=function(e,r){var t=document.createElement(e);for(var n in r)t.setAttribute(n,r[n]);return t},generateSuggestionsList=function(e,r){for(var t=createDomNode("div",{class:"search__result__box"}),n=0;n<TOTAL_RESULTS;++n){var o=createDomNode("div",{class:"search__result__single",id:"hit__"+(n+1)}),s=createDomNode("a",{href:e.results[n].link+DOCUMENTATION_OPTIONS.FILE_SUFFIX}),a=createDomNode("div",{class:"content"}),l=createDomNode("h2",{class:"search__result__title"});void 0!==e.results[n].highlight.title?l.innerHTML=e.results[n].highlight.title[0]:l.innerHTML=e.results[n].title,a.appendChild(l),a.appendChild(createDomNode("br"));var c=createDomNode("small",{class:"search__result__path"});c.innerHTML=e.results[n].path,e.results[n].project!==r&&(c.innerHTML=e.results[n].path+" (from <strong>"+e.results[n].project+"</strong>)"),a.appendChild(c);var i=createDomNode("p",{class:"search__result__content"});void 0!==e.results[n].highlight.content?i.innerHTML="... "+e.results[n].highlight.content+" ...":i.innerHTML="",a.appendChild(i),s.appendChild(a),o.appendChild(s),t.appendChild(o)}return t},removeAllActive=function(){for(var r=document.querySelectorAll(".search__result__single"),e=Object.keys(r).map(function(e){return r[e]}),t=1;t<=e.length;++t)e[t-1].classList.remove("active")},addActive=function(e){var r=document.querySelector("#hit__"+e);null!==r&&(r.classList.add("active"),r.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))},getInputField=function(){return document.querySelector("div[role='search'] input")},removeResults=function(){for(var e=document.querySelectorAll(".search__result__box"),r=0;r<e.length;++r)e[r].parentElement.removeChild(e[r])},getErrorDiv=function(e){var r=createDomNode("div",{class:"search__result__box",style:"color: black; min-width: 300px"});return r.innerHTML=e,r},fetchAndGenerateResults=function(e,o){var s=document.querySelector(".search__outer");removeResults();var r=createDomNode("div",{class:"search__result__box"});r.innerHTML="Searching ....",s.appendChild(r),$.ajax({url:e,crossDomain:!0,xhrFields:{withCredentials:!0},complete:function(e,r){if("success"===r||void 0!==e.responseJSON)if(0<e.responseJSON.results.length){TOTAL_RESULTS=MAX_SUGGESTIONS<=e.responseJSON.results.length?MAX_SUGGESTIONS:e.responseJSON.results.length;var t=generateSuggestionsList(e.responseJSON,o);removeResults(),s.appendChild(t),s.addEventListener("mouseenter",function(e){removeAllActive()})}else{removeResults();var n=getErrorDiv("No Results Found");s.appendChild(n)}},error:function(e,r,t){removeResults();var n=getErrorDiv("Error Occurred. Please try again.");s.appendChild(n)}})},generateAndReturnInitialHtml=function(){var e=createDomNode("div",{class:"search__outer__wrapper search__backdrop"}),r=createDomNode("div",{class:"search__outer"}),t=createDomNode("div",{class:"search__cross",title:"Close"});t.innerHTML="<?xml version='1.0' encoding='UTF-8'?><svg class='search__cross__img' width='15px' height='15px' enable-background='new 0 0 612 612' version='1.1' viewBox='0 0 612 612' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'><polygon points='612 36.004 576.52 0.603 306 270.61 35.478 0.603 0 36.004 270.52 306.01 0 576 35.478 611.4 306 341.41 576.52 611.4 612 576 341.46 306.01'/></svg>",r.appendChild(t);var n=createDomNode("input",{class:"search__outer__input",placeholder:"Search ..."}),o=createDomNode("span",{class:"bar"});return r.appendChild(n),r.appendChild(o),e.appendChild(r),{search_outer_wrapper:e,search_outer_input:n,search_outer:r,cross_icon:t}},showSearchModal=function(){removeResults(),getInputField().blur(),document.querySelector(".search__outer__wrapper").classList.add("display-block");var e=document.querySelector(".search__outer__input");null!==e&&(e.value="",e.focus())},removeSearchModal=function(){removeResults();var e=document.querySelector(".search__outer__input");null!==e&&(e.value="",e.blur()),document.querySelector(".search__outer__wrapper").classList.remove("display-block")};window.addEventListener("DOMContentLoaded",function(e){if(void 0!==READTHEDOCS_DATA){var n=READTHEDOCS_DATA.project,o=READTHEDOCS_DATA.version,s=READTHEDOCS_DATA.language||"en",a=READTHEDOCS_DATA.api_host,r=generateAndReturnInitialHtml(),t=r.search_outer_wrapper,l=r.search_outer_input,c=r.cross_icon;document.body.appendChild(t);var i=0,d=getInputField();d.addEventListener("focus",function(e){showSearchModal()}),l.addEventListener("input",function(e){SEARCH_QUERY=e.target.value;var r={q:encodeURIComponent(SEARCH_QUERY),project:n,version:o,language:s},t=a+"/api/v2/docsearch/?"+convertObjToUrlParams(r);"string"==typeof SEARCH_QUERY&&0<SEARCH_QUERY.length?fetchAndGenerateResults(t,n):removeResults()}),l.addEventListener("keydown",function(e){if(40===e.keyCode&&(e.preventDefault(),TOTAL_RESULTS<(i+=1)&&(i=1),removeAllActive(),addActive(i)),38===e.keyCode&&(e.preventDefault(),(i-=1)<1&&(i=TOTAL_RESULTS),removeAllActive(),addActive(i)),13===e.keyCode){e.preventDefault();var r=document.querySelector(".search__result__single.active");if(null!==r){var t=r.firstChild.href;window.location.href=t}else{var n=document.querySelector("div[role='search'] form");d.value=SEARCH_QUERY||"",n.submit()}}}),t.addEventListener("click",function(e){e.target.parentNode===document.body&&removeSearchModal()}),c.addEventListener("click",function(e){removeSearchModal()}),document.addEventListener("keydown",function(e){27===e.keyCode&&removeSearchModal()})}});