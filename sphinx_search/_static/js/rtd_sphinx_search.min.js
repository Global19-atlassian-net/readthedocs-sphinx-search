"use strict";var MAX_SUGGESTIONS=50,TOTAL_PAGE_RESULTS=0,SEARCH_QUERY="",COUNT=0,debounce=function(r,n){function e(){var e=this,t=arguments;clearTimeout(o),o=setTimeout(function(){return r.apply(e,t)},n)}var o;return e.cancel=function(){clearTimeout(o),o=null},e},convertObjToUrlParams=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},createDomNode=function(e,t){var r=document.createElement(e);for(var n in t)r.setAttribute(n,t[n]);return r},generateSingleResult=function(e){var t=createDomNode("div"),r=createDomNode("a",{href:"".concat(e.link).concat(DOCUMENTATION_OPTIONS.FILE_SUFFIX)}),n=createDomNode("h2",{class:"search__result__title"});void 0!==e.highlight&&null!==e.highlight&&void 0!==e.highlight.title&&null!==e.highlight.title?n.innerHTML=e.highlight.title:n.innerHTML=e.title,r.appendChild(n),t.appendChild(r),t.appendChild(createDomNode("br"));var o=e.inner_hits.sections,a=e.inner_hits.domains;if(null!=o)for(var i=0;i<o.length;++i){COUNT+=1;var s=createDomNode("a",{href:"".concat(r.href,"#").concat(o[i]._source.id)}),c=createDomNode("span",{class:"search__result__subheading"});void 0!==o[i].highlight["sections.title"]&&1<=o[i].highlight["sections.title"].length?c.innerHTML=o[i].highlight["sections.title"][0]:c.innerHTML=o[i]._source.title;var l=createDomNode("p",{class:"search__result__content"});void 0!==o[i].highlight["sections.content"]&&1<=o[i].highlight["sections.content"].length?l.innerHTML="... "+o[i].highlight["sections.content"][0]+" ...":l.innerHTML=o[i]._source.content.substring(0,50)+" ...";var d=createDomNode("div",{class:"outer_div_page_results",id:"hit__"+COUNT});d.appendChild(c),d.appendChild(l),s.appendChild(d),t.appendChild(s),t.appendChild(createDomNode("br",{class:"br-for-hits"}))}if(null!=a)for(var u=0;u<a.length;++u){COUNT+=1;var h=createDomNode("a",{href:"".concat(r.href,"#").concat(a[u]._source.anchor)}),_=createDomNode("span",{class:"search__result__subheading"});_.innerHTML=a[u]._source.role_name;var v=createDomNode("p",{class:"search__result__content"});void 0!==a[u].highlight&&null!==a.highlight&&void 0!==a[u].highlight["domains.name"]&&1<=a[u].highlight["domains.name"].length?v.innerHTML=a[u].highlight["domains.name"][0]:v.innerHTML=a[u]._source.name.substring(0,40)+" ...";var p=createDomNode("div",{class:"outer_div_page_results",id:"hit__"+COUNT});p.appendChild(_),p.appendChild(v),h.appendChild(p),t.appendChild(h),t.appendChild(createDomNode("br",{class:"br-for-hits"}))}return t},generateSuggestionsList=function(e,t){for(var r=createDomNode("div",{class:"search__result__box"}),n=0;n<TOTAL_PAGE_RESULTS;++n){var o=createDomNode("div",{class:"search__result__single"}),a=generateSingleResult(e.results[n]);o.appendChild(a),r.appendChild(o)}return r},removeAllActive=function(){for(var t=document.querySelectorAll(".outer_div_page_results"),e=Object.keys(t).map(function(e){return t[e]}),r=1;r<=e.length;++r)e[r-1].classList.remove("active")},addActive=function(e){var t=document.querySelector("#hit__"+e);null!==t&&(t.classList.add("active"),t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))},getInputField=function(){return document.querySelector("div[role='search'] input")},removeResults=function(){for(var e=document.querySelectorAll(".search__result__box"),t=0;t<e.length;++t)e[t].parentElement.removeChild(e[t])},getErrorDiv=function(e){var t=createDomNode("div",{class:"search__result__box",style:"color: black; min-width: 300px"});return t.innerHTML=e,t},fetchAndGenerateResults=function(e,o){var a=document.querySelector(".search__outer");removeResults();var t=createDomNode("div",{class:"search__result__box"});t.innerHTML="Searching ....",a.appendChild(t);var r=function(){$.ajax({url:e,crossDomain:!0,xhrFields:{withCredentials:!0},complete:function(e,t){if("success"===t||void 0!==e.responseJSON)if(0<e.responseJSON.results.length){TOTAL_PAGE_RESULTS=MAX_SUGGESTIONS<=e.responseJSON.results.length?MAX_SUGGESTIONS:e.responseJSON.results.length;var r=generateSuggestionsList(e.responseJSON,o);removeResults(),a.appendChild(r),a.addEventListener("mouseenter",function(e){removeAllActive()})}else{removeResults();var n=getErrorDiv("No Results Found");a.appendChild(n)}},error:function(e,t,r){removeResults();var n=getErrorDiv("Error Occurred. Please try again.");a.appendChild(n)}})};return r=debounce(r,500)},generateAndReturnInitialHtml=function(){var e=createDomNode("div",{class:"search__outer__wrapper search__backdrop"}),t=createDomNode("div",{class:"search__outer"}),r=createDomNode("div",{class:"search__cross",title:"Close"});r.innerHTML="<?xml version='1.0' encoding='UTF-8'?><svg class='search__cross__img' width='15px' height='15px' enable-background='new 0 0 612 612' version='1.1' viewBox='0 0 612 612' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'><polygon points='612 36.004 576.52 0.603 306 270.61 35.478 0.603 0 36.004 270.52 306.01 0 576 35.478 611.4 306 341.41 576.52 611.4 612 576 341.46 306.01'/></svg>",t.appendChild(r);var n=createDomNode("input",{class:"search__outer__input",placeholder:"Search ..."}),o=createDomNode("span",{class:"bar"});return t.appendChild(n),t.appendChild(o),e.appendChild(t),{search_outer_wrapper:e,search_outer_input:n,search_outer:t,cross_icon:r}},showSearchModal=function(){removeResults(),getInputField().blur(),document.querySelector(".search__outer__wrapper").classList.add("display-block");var e=document.querySelector(".search__outer__input");null!==e&&(e.value="",e.focus())},removeSearchModal=function(){removeResults();var e=document.querySelector(".search__outer__input");null!==e&&(e.value="",e.blur()),document.querySelector(".search__outer__wrapper").classList.remove("display-block")};window.addEventListener("DOMContentLoaded",function(e){if(void 0!==READTHEDOCS_DATA){var n=READTHEDOCS_DATA.project,o=READTHEDOCS_DATA.version,a=READTHEDOCS_DATA.language||"en",i=READTHEDOCS_DATA.api_host,t=generateAndReturnInitialHtml(),r=t.search_outer_wrapper,s=t.search_outer_input,c=t.cross_icon;document.body.appendChild(r);var l=0,d=null,u=getInputField();u.addEventListener("focus",function(e){showSearchModal()}),s.addEventListener("input",function(e){SEARCH_QUERY=e.target.value,COUNT=0;var t={q:encodeURIComponent(SEARCH_QUERY),project:n,version:o,language:a},r=i+"/api/v2/docsearch/?"+convertObjToUrlParams(t);"string"==typeof SEARCH_QUERY&&0<SEARCH_QUERY.length?(null!==d&&d.cancel(),(d=fetchAndGenerateResults(r,n))()):debounce(removeResults,3e3)()}),s.addEventListener("keydown",function(e){if(40===e.keyCode&&(e.preventDefault(),COUNT<(l+=1)&&(l=1),removeAllActive(),addActive(l)),38===e.keyCode&&(e.preventDefault(),(l-=1)<1&&(l=COUNT),removeAllActive(),addActive(l)),13===e.keyCode){e.preventDefault();var t=document.querySelector(".outer_div_page_results.active");if(null!==t){var r=t.parentElement.href;window.location.href=r}else{var n=document.querySelector("div[role='search'] form");u.value=SEARCH_QUERY||"",n.submit()}}}),r.addEventListener("click",function(e){e.target.parentNode===document.body&&removeSearchModal()}),c.addEventListener("click",function(e){removeSearchModal()}),document.addEventListener("keydown",function(e){27===e.keyCode&&removeSearchModal()})}});